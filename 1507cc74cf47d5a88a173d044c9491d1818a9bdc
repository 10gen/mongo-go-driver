{
  "comments": [
    {
      "key": {
        "uuid": "1810632b_eed30399",
        "filename": "x/mongo/driver/list_indexes.go",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-11T18:26:48Z",
      "side": 1,
      "message": "What\u0027s the scenario where this conditional is necessary?  When wouldn\u0027t the already-configured read preference be the one to use for the find command?",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 1
      },
      "revId": "1507cc74cf47d5a88a173d044c9491d1818a9bdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1020336f_6801a1a0",
        "filename": "x/mongo/driver/list_indexes.go",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1014410
      },
      "writtenOn": "2018-12-11T18:36:13Z",
      "side": 1,
      "message": "I mis-interpreted a section of the spec. One interesting thing though - the command.ListIndexes struct doesn\u0027t have a read preference on it, so there\u0027s nothing to pass down to command.Find. Should the read preference be there or was it intentionally left out?",
      "parentUuid": "1810632b_eed30399",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 1
      },
      "revId": "1507cc74cf47d5a88a173d044c9491d1818a9bdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c88c9c10_079e3c5d",
        "filename": "x/mongo/driver/list_indexes.go",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-11T20:36:48Z",
      "side": 1,
      "message": "In the mongo API, ListCollections always runs on the primary.  The slaveok bit should only be set if we\u0027re directly connected to a replica set member.  So it\u0027s not the Kind of the Server, it\u0027s whether we have a direct connection to a replica set member.  I think that\u0027s in topology\u0027s config struct: the mode field.",
      "parentUuid": "1020336f_6801a1a0",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 1
      },
      "revId": "1507cc74cf47d5a88a173d044c9491d1818a9bdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1558c20e_46445b5e",
        "filename": "x/mongo/driver/list_indexes.go",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-11T22:27:15Z",
      "side": 1,
      "message": "Also, I think it makes more sense if read preference is passed down to all commands that read.  If the high-level driver always passes Primary to ListCollections, that\u0027s fine.  But easier if core is consistent.",
      "parentUuid": "c88c9c10_079e3c5d",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 1
      },
      "revId": "1507cc74cf47d5a88a173d044c9491d1818a9bdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7839823f_a1994d66",
        "filename": "x/mongo/driver/list_indexes.go",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1014410
      },
      "writtenOn": "2018-12-11T22:43:00Z",
      "side": 1,
      "message": "Talked offline with Jeff and we decided that slaveOK should be set for all direct connections, not just secondaries. In this case, the setting of slaveOK should be handled by the underlying find operation (specifically the slaveONeeded function).",
      "parentUuid": "1558c20e_46445b5e",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 1
      },
      "revId": "1507cc74cf47d5a88a173d044c9491d1818a9bdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2afade5_6319621a",
        "filename": "x/mongo/driver/list_indexes.go",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-11T22:55:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7839823f_a1994d66",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 97,
        "endChar": 1
      },
      "revId": "1507cc74cf47d5a88a173d044c9491d1818a9bdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}