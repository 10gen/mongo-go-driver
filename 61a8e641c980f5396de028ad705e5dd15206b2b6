{
  "comments": [
    {
      "key": {
        "uuid": "d2ba1bab_b1134090",
        "filename": "x/network/command/command_test.go",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-12T22:20:36Z",
      "side": 1,
      "message": "I think this test is incorrect. Drivers should only ever include $readPreference when connected to a mongos server.",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 68,
        "endChar": 1
      },
      "revId": "61a8e641c980f5396de028ad705e5dd15206b2b6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7cbad895_bd92f591",
        "filename": "x/network/command/command_test.go",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-12T22:20:36Z",
      "side": 1,
      "message": "I think this test is incorrect.  Drivers should only ever include $readPreference when connected to a mongos server.",
      "range": {
        "startLine": 104,
        "startChar": 8,
        "endLine": 104,
        "endChar": 19
      },
      "revId": "61a8e641c980f5396de028ad705e5dd15206b2b6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "753156a9_3afa6bfb",
        "filename": "x/network/command/command_test.go",
        "patchSetId": 1
      },
      "lineNbr": 140,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-12T22:20:36Z",
      "side": 1,
      "message": "Based on above comment, I think this test is incorrect.",
      "range": {
        "startLine": 140,
        "startChar": 0,
        "endLine": 140,
        "endChar": 1
      },
      "revId": "61a8e641c980f5396de028ad705e5dd15206b2b6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d283ecdb_d1c478af",
        "filename": "x/network/command/read.go",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-12T22:20:36Z",
      "side": 1,
      "message": "I don\u0027t think this is correct when sending OP_MSG, since it doesn\u0027t have a slaveOK bit and therefore the read preference can only be communicated via $readPreference.  Offhand, I don\u0027t see a better way to fix this but to pass in an isOpMsg boolean to this function.\n\nFrom what I can tell, the server selection specification section https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst#passing-read-preference-to-mongos only applies to OP_QUERY, since OP_MSG doesn\u0027t have a slaveOK bit",
      "range": {
        "startLine": 45,
        "startChar": 0,
        "endLine": 45,
        "endChar": 1
      },
      "revId": "61a8e641c980f5396de028ad705e5dd15206b2b6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bce56ed8_154a2b97",
        "filename": "x/network/command/read.go",
        "patchSetId": 1
      },
      "lineNbr": 118,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2018-12-12T22:20:36Z",
      "side": 1,
      "message": "Same rule here as for OP_QUERY: $readPreference field should only be added for messages sent to a mongos server",
      "range": {
        "startLine": 118,
        "startChar": 0,
        "endLine": 118,
        "endChar": 1
      },
      "revId": "61a8e641c980f5396de028ad705e5dd15206b2b6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}