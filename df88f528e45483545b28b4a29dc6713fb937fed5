{
  "comments": [
    {
      "key": {
        "uuid": "8ed25e73_fad21989",
        "filename": "mongo/collection.go",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2019-05-21T18:41:22Z",
      "side": 1,
      "message": "This surprises me.  The operation layer should be abstracting the actual BSON document structure of the command, so the fact that we\u0027re including this as a BSON document is a strange thing to see here. So I was expecting some sort of DeleteRequest struct here. I suppose this would require some fairly substantial changes to drivergen?",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 410,
        "endChar": 1
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a4fb4ed_b71a9f96",
        "filename": "mongo/collection.go",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1014410
      },
      "writtenOn": "2019-05-21T18:48:16Z",
      "side": 1,
      "message": "Yeah, this was annoying. The issue was that the collation field needs to be on each document rather than on the command as a whole, so I needed to create the documents before passing them down to DeleteOperation. Future changes to drivergen could include some sort of option that allows this because similar logic is needed for update.",
      "parentUuid": "8ed25e73_fad21989",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 410,
        "endChar": 1
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a025247_9d7b9c93",
        "filename": "mongo/collection.go",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2019-05-21T21:11:28Z",
      "side": 1,
      "message": "I\u0027m going to leave this open as I think it\u0027s a significant enough hole in drivergen that it should be fixed ASAP",
      "parentUuid": "4a4fb4ed_b71a9f96",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 410,
        "endChar": 1
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ffc66d48_4e80b8c7",
        "filename": "mongo/collection.go",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1001503
      },
      "writtenOn": "2019-05-28T18:05:17Z",
      "side": 1,
      "message": "We can likely make this work by either having a DeleteParameter type or just having the method on operation take all of the fields for a delete parameter. It is an oddly shaped command, maybe we should open a ticket for this?",
      "parentUuid": "8a025247_9d7b9c93",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 410,
        "endChar": 1
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d843b300_4f58d6d4",
        "filename": "mongo/collection.go",
        "patchSetId": 2
      },
      "lineNbr": 410,
      "author": {
        "id": 1014410
      },
      "writtenOn": "2019-05-28T19:05:18Z",
      "side": 1,
      "message": "Update has a similar issue because upsert, multi, collation, and arrayFilters are included on each update document rather than on the command, so I don\u0027t think a special \"DeleteParameter\" type is the right way to go. Maybe we could add an option to request fields in drivergen to specify that they should be on each document in the batch? There\u0027s also the issue that the BSON key for the filter is \"q\", not \"filter\" so there will be some other changes to drivergen as well.",
      "parentUuid": "ffc66d48_4e80b8c7",
      "range": {
        "startLine": 410,
        "startChar": 0,
        "endLine": 410,
        "endChar": 1
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1eb4d483_a4fb3b1d",
        "filename": "mongo/mongo.go",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2019-05-21T18:41:22Z",
      "side": 1,
      "message": "Does this amount to the same thing?",
      "range": {
        "startLine": 200,
        "startChar": 0,
        "endLine": 200,
        "endChar": 1
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80c7a54d_1c9561d7",
        "filename": "mongo/mongo.go",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 1014410
      },
      "writtenOn": "2019-05-21T18:48:16Z",
      "side": 1,
      "message": "Yes, bson.DefaultRegistry is defined in bson/ as \"NewRegistryBuilder().Build()\"",
      "parentUuid": "1eb4d483_a4fb3b1d",
      "range": {
        "startLine": 200,
        "startChar": 0,
        "endLine": 200,
        "endChar": 1
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ea8b4d6_3ef98c59",
        "filename": "x/mongo/driver/operation/delete.toml",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1013848
      },
      "writtenOn": "2019-05-21T18:41:22Z",
      "side": 1,
      "message": "successfully deleted, not inserted",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 38,
        "endChar": 13
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "209cf140_2ea35e69",
        "filename": "x/mongo/driver/operation/delete.toml",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1014410
      },
      "writtenOn": "2019-05-21T18:48:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3ea8b4d6_3ef98c59",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 38,
        "endChar": 13
      },
      "revId": "df88f528e45483545b28b4a29dc6713fb937fed5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}